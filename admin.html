<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Write Article</title>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #editor-container { height: 300px; }
        .btn { padding: 10px; background: #28a745; color: white; border: none; cursor: pointer; }
        .btn:hover { background: #218838; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>

    <h1>Admin Panel - Write Article</h1>
    <input type="text" id="titleInput" placeholder="Enter title" style="width: 100%; padding: 10px; margin-bottom: 10px;">
    <div id="editor-container"></div>
    <button id="saveButton" class="btn">Save Article</button>

    <script>
        // Initialize Quill Editor
        const quill = new Quill('#editor-container', { theme: 'snow' });

        // Supabase Credentials (Replace with your actual project details)
        const SUPABASE_URL = "https://hmkajkrlkcvszwgtdnet.supabase.co";
        const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhta2Fqa3Jsa2N2c3p3Z3RkbmV0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk5Njc4NjIsImV4cCI6MjA1NTU0Mzg2Mn0.lrIXG_MNg37VFL20PpXOrJMik8FQwTeaMXdMGw5j2no";

        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        document.getElementById('saveButton').addEventListener('click', async () => {
            const title = document.getElementById('titleInput').value.trim();
            const content = quill.root.innerHTML.trim();

            if (!title || !content) {
                alert("Title and content cannot be empty!");
                return;
            }

            console.log("Saving article...");

            // Save to Supabase
            const { data, error } = await supabase
                .from("articles") // Table name
                .insert([{ title, content, timestamp: new Date() }]);

            if (error) {
                console.error("Error:", error.message);
                alert("Failed to save article!");
            } else {
                console.log("Saved:", data);
                alert("Article saved successfully!");
            }
        });
    </script>

</body>
</html>
